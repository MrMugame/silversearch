var b=Object.defineProperty;var w=(t,r)=>{for(var n in r)b(t,n,{get:r[n],enumerable:!0})};function m(t){let r=atob(t),n=r.length,o=new Uint8Array(n);for(let i=0;i<n;i++)o[i]=r.charCodeAt(i);return o}function c(t){typeof t=="string"&&(t=new TextEncoder().encode(t));let r="",n=t.byteLength;for(let o=0;o<n;o++)r+=String.fromCharCode(t[o]);return btoa(r)}var l=t=>{throw new Error("Not initialized yet")},p=typeof window>"u"&&typeof globalThis.WebSocketPair>"u";typeof Deno>"u"&&(self.Deno={args:[],build:{arch:"x86_64"},env:{get(){}}});var d=new Map,f=0;p&&(globalThis.syscall=async(t,...r)=>await new Promise((n,o)=>{f++,d.set(f,{resolve:n,reject:o}),l({type:"sys",id:f,name:t,args:r})}));function g(t,r,n){p&&(l=n,self.addEventListener("message",o=>{(async()=>{let i=o.data;switch(i.type){case"inv":{let a=t[i.name];if(!a)throw new Error(`Function not loaded: ${i.name}`);try{let s=await Promise.resolve(a(...i.args||[]));l({type:"invr",id:i.id,result:s})}catch(s){console.error("An exception was thrown as a result of invoking function",i.name,"error:",s.message),l({type:"invr",id:i.id,error:s.message})}}break;case"sysr":{let a=i.id,s=d.get(a);if(!s)throw Error("Invalid request id");d.delete(a),i.error?s.reject(new Error(i.error)):s.resolve(i.result)}break}})().catch(console.error)}),l({type:"manifest",manifest:r}))}async function _(t,r){if(typeof t!="string"){let n=new Uint8Array(await t.arrayBuffer()),o=n.length>0?c(n):void 0;r={method:t.method,headers:Object.fromEntries(t.headers.entries()),base64Body:o},t=t.url}return syscall("sandboxFetch.fetch",t,r)}globalThis.nativeFetch=globalThis.fetch;function M(){globalThis.fetch=async function(t,r){let n=r&&r.body?c(new Uint8Array(await new Response(r.body).arrayBuffer())):void 0,o=await _(t,r&&{method:r.method,headers:r.headers,base64Body:n});return new Response(o.base64Body?m(o.base64Body):null,{status:o.status,headers:o.headers})}}p&&M();var u={};w(u,{alert:()=>lt,configureVimMode:()=>Mt,confirm:()=>at,copyToClipboard:()=>ht,deleteLine:()=>Pt,dispatch:()=>it,downloadFile:()=>I,filterBox:()=>z,flashNotification:()=>G,fold:()=>ft,foldAll:()=>mt,getCurrentEditor:()=>k,getCurrentPage:()=>C,getCurrentPageMeta:()=>S,getCurrentPath:()=>E,getCursor:()=>D,getRecentlyOpenedPages:()=>F,getSelection:()=>L,getText:()=>A,getUiOption:()=>ut,goHistory:()=>H,hidePanel:()=>X,insertAtCursor:()=>ot,insertAtPos:()=>tt,invokeCommand:()=>O,moveCursor:()=>rt,moveCursorToLine:()=>nt,moveLineDown:()=>wt,moveLineUp:()=>bt,navigate:()=>q,newWindow:()=>$,openCommandPalette:()=>N,openPageNavigator:()=>K,openSearchPanel:()=>xt,openUrl:()=>Q,prompt:()=>st,rebuildEditorState:()=>W,redo:()=>yt,reloadConfigAndCommands:()=>V,reloadPage:()=>j,reloadUI:()=>B,replaceRange:()=>et,save:()=>R,sendMessage:()=>Ct,setSelection:()=>U,setText:()=>T,setUiOption:()=>ct,showPanel:()=>J,showProgress:()=>Z,toggleFold:()=>pt,undo:()=>vt,unfold:()=>dt,unfoldAll:()=>gt,uploadFile:()=>Y,vimEx:()=>_t});typeof self>"u"&&(self={syscall:()=>{throw new Error("Not implemented here")}});function e(t,...r){return globalThis.syscall(t,...r)}function C(){return e("editor.getCurrentPage")}function S(){return e("editor.getCurrentPageMeta")}function E(t=!1){return e("editor.getCurrentPath",t)}function F(){return e("editor.getRecentlyOpenedPages")}function k(){return e("editor.getCurrentEditor")}function A(){return e("editor.getText")}function T(t,r=!1){return e("editor.setText",t,r)}function D(){return e("editor.getCursor")}function L(){return e("editor.getSelection")}function U(t,r){return e("editor.setSelection",t,r)}function O(t,r){return e("editor.invokeCommand",t,r)}function R(){return e("editor.save")}function q(t,r=!1,n=!1){return e("editor.navigate",t,r,n)}function K(t="page"){return e("editor.openPageNavigator",t)}function N(){return e("editor.openCommandPalette")}function j(){return e("editor.reloadPage")}function B(){return e("editor.reloadUI")}function W(){return e("editor.rebuildEditorState")}function V(){return e("editor.reloadConfigAndCommands")}function Q(t,r=!1){return e("editor.openUrl",t,r)}function $(){return e("editor.newWindow")}function H(t){return e("editor.goHistory",t)}function I(t,r){return e("editor.downloadFile",t,r)}function Y(t,r){return e("editor.uploadFile",t,r)}function G(t,r="info"){return e("editor.flashNotification",t,r)}function z(t,r,n="",o=""){return e("editor.filterBox",t,r,n,o)}function J(t,r,n,o=""){return e("editor.showPanel",t,r,n,o)}function X(t){return e("editor.hidePanel",t)}function Z(t,r){return e("editor.showProgress",t,r)}function tt(t,r){return e("editor.insertAtPos",t,r)}function et(t,r,n){return e("editor.replaceRange",t,r,n)}function rt(t,r=!1){return e("editor.moveCursor",t,r)}function nt(t,r=1,n=!1){return e("editor.moveCursorToLine",t,r,n)}function ot(t,r=!1,n=!1){return e("editor.insertAtCursor",t,r,n)}function it(t){return e("editor.dispatch",t)}function st(t,r=""){return e("editor.prompt",t,r)}function at(t){return e("editor.confirm",t)}function lt(t){return e("editor.alert",t)}function ut(t){return e("editor.getUiOption",t)}function ct(t,r){return e("editor.setUiOption",t,r)}function ft(){return e("editor.fold")}function dt(){return e("editor.unfold")}function pt(){return e("editor.toggleFold")}function mt(){return e("editor.foldAll")}function gt(){return e("editor.unfoldAll")}function vt(){return e("editor.undo")}function yt(){return e("editor.redo")}function xt(){return e("editor.openSearchPanel")}function ht(t){return e("editor.copyToClipboard",t)}function Pt(){return e("editor.deleteLine")}function bt(){return e("editor.moveLineUp")}function wt(){return e("editor.moveLineDown")}function _t(t){return e("editor.vimEx",t)}function Mt(){return e("editor.configureVimMode")}function Ct(t,r){return e("editor.sendMessage",t,r)}var v=`(function(){"use strict";var Ot,Mt;var Lt=Array.isArray,It=Array.prototype.indexOf,Pt=Array.from,qt=Object.defineProperty,nt=Object.getOwnPropertyDescriptor,et=Object.isExtensible;function Bt(t){for(var r=0;r<t.length;r++)t[r]()}const R=2,lt=4,G=8,Vt=16,S=32,L=64,z=128,N=256,B=512,E=1024,V=2048,I=4096,Y=8192,J=16384,ut=32768,Yt=65536,Ht=1<<19,Ut=1<<20,it=1<<21,Wt=Symbol("$state");function $t(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function jt(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Kt(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Gt(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}let Kr=!1;const zt=2;let h=null;function at(t){h=t}function ot(t,r=!1,n){var e=h={p:h,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};pt(()=>{e.d=!0})}function ft(t){const r=h;if(r!==null){const a=r.e;if(a!==null){var n=s,e=_;r.e=null;try{for(var u=0;u<a.length;u++){var l=a[u];x(l.effect),T(l.reaction),Q(l.fn)}}finally{x(n),T(e)}}h=r.p,r.m=!0}return{}}function Jt(){return!0}function st(t){var r=t.effects;if(r!==null){t.effects=null;for(var n=0;n<r.length;n+=1)D(r[n])}}function Qt(t){for(var r=t.parent;r!==null;){if((r.f&R)===0)return r;r=r.parent}return null}function Xt(t){var r,n=s;x(Qt(t));try{st(t),r=Dt(t)}finally{x(n)}return r}function Zt(t){var r=Xt(t);if(t.equals(r)||(t.v=r,t.wv=pr()),!W){var n=(A||(t.f&N)!==0)&&t.deps!==null?I:E;k(t,n)}}const tr=new Map;var ct,_t,vt,dt;function rr(){if(ct===void 0){ct=window,_t=/Firefox/.test(navigator.userAgent);var t=Element.prototype,r=Node.prototype,n=Text.prototype;vt=nt(r,"firstChild").get,dt=nt(r,"nextSibling").get,et(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),et(n)&&(n.__t=void 0)}}function nr(t=""){return document.createTextNode(t)}function ht(t){return vt.call(t)}function er(t){return dt.call(t)}function lr(t,r){return ht(t)}function ur(t){s===null&&_===null&&Kt(),_!==null&&(_.f&N)!==0&&s===null&&jt(),W&&$t()}function ir(t,r){var n=r.last;n===null?r.last=r.first=t:(n.next=t,t.prev=n,r.last=t)}function P(t,r,n,e=!0){var u=s,l={ctx:h,deps:null,nodes_start:null,nodes_end:null,f:t|V,first:null,fn:r,last:null,next:null,parent:u,prev:null,teardown:null,transitions:null,wv:0};if(n)try{tt(l),l.f|=ut}catch(d){throw D(l),d}else r!==null&&Ft(l);var a=n&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&(Ut|z))===0;if(!a&&e&&(u!==null&&ir(l,u),_!==null&&(_.f&R)!==0)){var f=_;(f.effects??(f.effects=[])).push(l)}return l}function pt(t){const r=P(G,null,!1);return k(r,E),r.teardown=t,r}function wt(t){ur();var r=s!==null&&(s.f&S)!==0&&h!==null&&!h.m;if(r){var n=h;(n.e??(n.e=[])).push({fn:t,effect:s,reaction:_})}else{var e=Q(t);return e}}function ar(t){const r=P(L,t,!0);return(n={})=>new Promise(e=>{n.outro?_r(r,()=>{D(r),e(void 0)}):(D(r),e(void 0))})}function Q(t){return P(lt,t,!1)}function or(t){return P(G,t,!0)}function fr(t,r=!0){return P(G|S,t,!0,r)}function gt(t){var r=t.teardown;if(r!==null){const n=W,e=_;kt(!0),T(null);try{r.call(null)}finally{kt(n),T(e)}}}function Et(t,r=!1){var n=t.first;for(t.first=t.last=null;n!==null;){var e=n.next;(n.f&L)!==0?n.parent=null:D(n,r),n=e}}function sr(t){for(var r=t.first;r!==null;){var n=r.next;(r.f&S)===0&&D(r),r=n}}function D(t,r=!0){var n=!1;(r||(t.f&Ht)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(cr(t.nodes_start,t.nodes_end),n=!0),Et(t,r&&!n),j(t,0),k(t,J);var e=t.transitions;if(e!==null)for(const l of e)l.stop();gt(t);var u=t.parent;u!==null&&u.first!==null&&mt(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function cr(t,r){for(;t!==null;){var n=t===r?null:er(t);t.remove(),t=n}}function mt(t){var r=t.parent,n=t.prev,e=t.next;n!==null&&(n.next=e),e!==null&&(e.prev=n),r!==null&&(r.first===t&&(r.first=e),r.last===t&&(r.last=n))}function _r(t,r){var n=[];yt(t,n,!0),vr(n,()=>{D(t),r&&r()})}function vr(t,r){var n=t.length;if(n>0){var e=()=>--n||r();for(var u of t)u.out(e)}else r()}function yt(t,r,n){if((t.f&Y)===0){if(t.f^=Y,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&r.push(a);for(var e=t.first;e!==null;){var u=e.next,l=(e.f&Yt)!==0||(e.f&S)!==0;yt(e,r,l?n:!1),e=u}}}let H=[];function dr(){var t=H;H=[],Bt(t)}function Tt(t){H.length===0&&queueMicrotask(dr),H.push(t)}function hr(t){var r=s;if((r.f&ut)===0){if((r.f&z)===0)throw t;r.fn(t)}else xt(t,r)}function xt(t,r){for(;r!==null;){if((r.f&z)!==0)try{r.fn(t);return}catch{}r=r.parent}throw t}let X=!1,U=null,F=!1,W=!1;function kt(t){W=t}let $=[],Gr=[],_=null,y=!1;function T(t){_=t}let s=null;function x(t){s=t}let O=null,g=null,p=0,m=null,bt=1,St=0,A=!1;function pr(){return++bt}function Z(t){var o;var r=t.f;if((r&V)!==0)return!0;if((r&I)!==0){var n=t.deps,e=(r&N)!==0;if(n!==null){var u,l,a=(r&B)!==0,f=e&&s!==null&&!A,d=n.length;if(a||f){var v=t,b=v.parent;for(u=0;u<d;u++)l=n[u],(a||!((o=l==null?void 0:l.reactions)!=null&&o.includes(v)))&&(l.reactions??(l.reactions=[])).push(v);a&&(v.f^=B),f&&b!==null&&(b.f&N)===0&&(v.f^=N)}for(u=0;u<d;u++)if(l=n[u],Z(l)&&Zt(l),l.wv>t.wv)return!0}(!e||s!==null&&!A)&&k(t,E)}return!1}function Nt(t,r,n=!0){var e=t.reactions;if(e!==null)for(var u=0;u<e.length;u++){var l=e[u];O!=null&&O.includes(t)||((l.f&R)!==0?Nt(l,r,!1):r===l&&(n?k(l,V):(l.f&E)!==0&&k(l,I),Ft(l)))}}function Dt(t){var c;var r=g,n=p,e=m,u=_,l=A,a=O,f=h,d=y,v=t.f;g=null,p=0,m=null,A=(v&N)!==0&&(y||!F||_===null),_=(v&(S|L))===0?t:null,O=null,at(t.ctx),y=!1,St++,t.f|=it;try{var b=(0,t.fn)(),o=t.deps;if(g!==null){var i;if(j(t,p),o!==null&&p>0)for(o.length=p+g.length,i=0;i<g.length;i++)o[p+i]=g[i];else t.deps=o=g;if(!A)for(i=p;i<o.length;i++)((c=o[i]).reactions??(c.reactions=[])).push(t)}else o!==null&&p<o.length&&(j(t,p),o.length=p);if(Jt()&&m!==null&&!y&&o!==null&&(t.f&(R|I|V))===0)for(i=0;i<m.length;i++)Nt(m[i],t);return u!==null&&u!==t&&(St++,m!==null&&(e===null?e=m:e.push(...m))),b}catch(w){hr(w)}finally{g=r,p=n,m=e,_=u,A=l,O=a,at(f),y=d,t.f^=it}}function wr(t,r){let n=r.reactions;if(n!==null){var e=It.call(n,t);if(e!==-1){var u=n.length-1;u===0?n=r.reactions=null:(n[e]=n[u],n.pop())}}n===null&&(r.f&R)!==0&&(g===null||!g.includes(r))&&(k(r,I),(r.f&(N|B))===0&&(r.f^=B),st(r),j(r,0))}function j(t,r){var n=t.deps;if(n!==null)for(var e=r;e<n.length;e++)wr(t,n[e])}function tt(t){var r=t.f;if((r&J)===0){k(t,E);var n=s,e=F;s=t,F=!0;try{(r&Vt)!==0?sr(t):Et(t),gt(t);var u=Dt(t);t.teardown=typeof u=="function"?u:null,t.wv=bt;var l}finally{F=e,s=n}}}function gr(){try{Gt()}catch(t){if(U!==null)xt(t,U);else throw t}}function Er(){var t=F;try{var r=0;for(F=!0;$.length>0;){r++>1e3&&gr();var n=$,e=n.length;$=[];for(var u=0;u<e;u++){var l=yr(n[u]);mr(l)}tr.clear()}}finally{X=!1,F=t,U=null}}function mr(t){var r=t.length;if(r!==0)for(var n=0;n<r;n++){var e=t[n];(e.f&(J|Y))===0&&Z(e)&&(tt(e),e.deps===null&&e.first===null&&e.nodes_start===null&&(e.teardown===null?mt(e):e.fn=null))}}function Ft(t){X||(X=!0,queueMicrotask(Er));for(var r=U=t;r.parent!==null;){r=r.parent;var n=r.f;if((n&(L|S))!==0){if((n&E)===0)return;r.f^=E}}$.push(r)}function yr(t){for(var r=[],n=t;n!==null;){var e=n.f,u=(e&(S|L))!==0,l=u&&(e&E)!==0;if(!l&&(e&Y)===0){(e&lt)!==0?r.push(n):u?n.f^=E:Z(n)&&tt(n);var a=n.first;if(a!==null){n=a;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)n=f.next,f=f.parent}return r}function Tr(t){var r=y;try{return y=!0,t()}finally{y=r}}const xr=-7169;function k(t,r){t.f=t.f&xr|r}const kr=["touchstart","touchmove"];function br(t){return kr.includes(t)}function Sr(t){var r=_,n=s;T(null),x(null);try{return t()}finally{T(r),x(n)}}const At=new Set,rt=new Set;function Nr(t,r,n,e={}){function u(l){if(e.capture||q.call(r,l),!l.cancelBubble)return Sr(()=>n==null?void 0:n.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Tt(()=>{r.addEventListener(t,u,e)}):r.addEventListener(t,u,e),u}function Dr(t,r,n,e,u){var l={capture:e,passive:u},a=Nr(t,r,n,l);(r===document.body||r===window||r===document||r instanceof HTMLMediaElement)&&pt(()=>{r.removeEventListener(t,a,l)})}function Fr(t){for(var r=0;r<t.length;r++)At.add(t[r]);for(var n of rt)n(t)}function q(t){var Rt;var r=this,n=r.ownerDocument,e=t.type,u=((Rt=t.composedPath)==null?void 0:Rt.call(t))||[],l=u[0]||t.target,a=0,f=t.__root;if(f){var d=u.indexOf(f);if(d!==-1&&(r===document||r===window)){t.__root=r;return}var v=u.indexOf(r);if(v===-1)return;d<=v&&(a=d)}if(l=u[a]||t.target,l!==r){qt(t,"currentTarget",{configurable:!0,get(){return l||n}});var b=_,o=s;T(null),x(null);try{for(var i,c=[];l!==null;){var w=l.assignedSlot||l.parentNode||l.host||null;try{var C=l["__"+e];if(C!=null&&(!l.disabled||t.target===l))if(Lt(C)){var[Wr,...$r]=C;Wr.apply(l,[t,...$r])}else C.call(l,t)}catch(K){i?c.push(K):i=K}if(t.cancelBubble||w===r||w===null)break;l=w}if(i){for(let K of c)queueMicrotask(()=>{throw K});throw i}}finally{t.__root=r,delete t.currentTarget,T(b),x(o)}}}function Ar(t){var r=document.createElement("template");return r.innerHTML=t.replaceAll("<!>","<!---->"),r.content}function Cr(t,r){var n=s;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=r)}function Or(t,r){var n=(r&zt)!==0,e,u=!t.startsWith("<!>");return()=>{e===void 0&&(e=Ar(u?t:"<!>"+t),e=ht(e));var l=n||_t?document.importNode(e,!0):e.cloneNode(!0);return Cr(l,l),l}}function Mr(t,r){t!==null&&t.before(r)}function Rr(t,r){return Lr(t,r)}const M=new Map;function Lr(t,{target:r,anchor:n,props:e={},events:u,context:l,intro:a=!0}){rr();var f=new Set,d=o=>{for(var i=0;i<o.length;i++){var c=o[i];if(!f.has(c)){f.add(c);var w=br(c);r.addEventListener(c,q,{passive:w});var C=M.get(c);C===void 0?(document.addEventListener(c,q,{passive:w}),M.set(c,1)):M.set(c,C+1)}}};d(Pt(At)),rt.add(d);var v=void 0,b=ar(()=>{var o=n??r.appendChild(nr());return fr(()=>{if(l){ot({});var i=h;i.c=l}u&&(e.$$events=u),v=t(o,e)||{},l&&ft()}),()=>{var w;for(var i of f){r.removeEventListener(i,q);var c=M.get(i);--c===0?(document.removeEventListener(i,q),M.delete(i)):M.set(i,c)}rt.delete(d),o!==n&&((w=o.parentNode)==null||w.removeChild(o))}});return Ir.set(v,b),v}let Ir=new WeakMap;function Ct(t,r){return t===r||(t==null?void 0:t[Wt])===r}function Pr(t={},r,n,e){return Q(()=>{var u,l;return or(()=>{u=l,l=[],Tr(()=>{t!==n(...l)&&(r(t,...l),u&&Ct(n(...u),t)&&r(null,...u))})}),()=>{Tt(()=>{l&&Ct(n(...l),t)&&r(null,...l)})}}),t}const qr="5";typeof window<"u"&&((Ot=window.__svelte??(window.__svelte={})).v??(Ot.v=new Set)).add(qr);var Br=t=>{t.stopPropagation()},Vr=t=>t.stopPropagation(),Yr=Or('<dialog class="sb-modal-box svelte-ddyex8"><div class="sb-header"><label for="mini-editor">Search</label> <div class="sb-mini-editor"><input id="mini-editor" placeholder="Search with Silversearch" class="svelte-ddyex8"/></div></div> <h1>Hallo das ist ein Test</h1></dialog>');function Hr(t,r){ot(r,!0);let n;wt(()=>{n.showModal()}),wt(()=>{function l(){syscall("editor.hidePanel","modal")}return document.addEventListener("click",l),()=>{document.removeEventListener("click",l)}});var e=Yr();e.__keydown=[Br];var u=lr(e);u.__click=[Vr],Pr(e,l=>n=l,()=>n),Dr("cancel",e,l=>{l.preventDefault(),syscall("editor.hidePanel","modal")}),Mr(t,e),ft()}Fr(["keydown","click"]);function Ur(){Rr(Hr,{target:document.querySelector("#container")})}console.log("Value:",(Mt=document.getElementsByTagName("html")[0].attributes.getNamedItem("data-theme"))==null?void 0:Mt.value),Ur()})();
`;var y=`<style>html,body{background:none!important;font-family:var(--ui-font)}dialog.svelte-ddyex8{outline:none}#mini-editor.svelte-ddyex8{caret-color:#fff;outline:none;border:none;padding:2px 0 0 3px;line-height:1.4;width:100%;background:none;font-family:var(--ui-font);font-size:1em;color:inherit}</style>
<link rel="stylesheet" href="/.client/main.css"/>
<div id="container"></div>`;async function x(){await u.showPanel("modal",1,y,v)}var h={search:x},P={name:"silversearch",functions:{search:{path:"./silversearch.ts:openSearch",command:{name:"Silversearch: Search",key:"Ctrl-Alt-q",mac:"Cmd-q"}}},assets:{}},_e={manifest:P,functionMapping:h};g(h,P,self.postMessage);export{_e as plug};
